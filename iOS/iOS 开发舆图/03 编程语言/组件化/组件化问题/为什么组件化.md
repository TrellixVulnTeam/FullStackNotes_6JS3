mx:因为在多人开发的时候，会遇到问题，提价git，整合项目的问题，几百人开发一个项目，会导致提交代码的问题，所以需要
进行架构，把项目解耦。

---

组件化的本质

- 组件化的本质是为了能重复利用以前写的东西，而且是能方便快速的使用，就像使用第三方库一样方便
难怪网络上这么多的第三方库，他们就是经常做组件话的一群人，在公司做了个东西出来，然后就开源了

---

为什么要进行组件化？

- 我个人认为并不是所有的业务模块都适合抽象成组件，现在移动互联网公司业务变化都非常快，
大部分的业务都不会被重用，不被重用的模块去花精力做封装设计并不划算，
另外还会造成组件库的膨胀和维护问题。至于哪些业务需要被抽象成组件，
需要各小组组长也移动端总架构师去沟通协商。
一个5人小团队内部将不同的tab都做组件化的封装是多此一举，
可能反而会延缓项目进度。比如Project A里的首页模块，用户详情页被其他Project复用的可能性非常小，
组件化有其代价存在。
- 比如，一开始有两个业务团队 A 和 B，他们在开发时既有通用的功能、账号、埋点、个人页等，也有专有的业务功能模块，每个功能都是一个组件。
- 这样，新创建的业务团队 C，就能非常轻松地使用团队 A 和 B 开发出的通用组件。而且，如果两个业务团队有相同功能时，
对相应的功能组件进行简单改造后，也能同时适用于两个业务团队。

---

组件化的粒度应该怎么定？

- iOS 组件，应该是包含 UI 控件、相关多个小功能的合集，是一种粒度适中的模块。
- 戴铭的建议是不大，不小，适中就好，但是这个也是无法定义的衡量标准，只能通过实际的经验来，目前我定义的标准是，
只要以后会复用的控件，我会定义成一个组件，比如日历组件，选择日期组件等等。
- 我认为不用把所有的功能都做成组件，只有那些会被多个业务或者团队使用的功能模块才需要做成组件。
- 拆分粒度不适中
- 某些库比如 LPDBOCFoundationGarbage 比较庞大，而像 LPDBUIKit 这样的库中内容却非常少，
这一点的处理上存在问题。如果一个拆分完成的库仍然比较臃肿的化，说明仍然存在细化拆分的必余地。

---

// 戴铭遇到的架构问题

- 后来，我们痛定思痛，花了很大力气去进行架构整治，将业务完全解耦，将通用功能下沉，
每个业务都是一个独立的 Git 仓库，每个业务都能够生成一个 Pod 库，最后再集成到一起。
这样经过架构整治以后，也就没再出现过先前的窘境，开发效率也得到了极大的提升。
由此可见，合理的架构是多么得重要。

---

架构什么时候开始好呢？

所以，架构重构考虑得越晚，重构起来就越困难，快速迭代的需求开发和漫长的重构之间的矛盾，
如同在飞行的飞机上换引擎。及早考虑架构设计就显得尤为重要。

---

架构需要解决的问题

所以，接下来我们就不得不考虑模块粒度如何划分、如何分层，以及多团队如何协作这三个问题了。
解决了这三个问题以后，我们就可以对模块内部做进一步优化了。模块久经考验后，
就能成为通用功能对外部输出，方便更多的团队。

简单架构向大型项目架构演进中，就需要解决三个问题，即：模块粒度应该如何划分？
如何分层？多团队如何协作？而在这其中，模块粒度的划分是架构设计中非常关键的一步。
同时，这也是一个细活，我们最好可以在不同阶段采用不同的粒度划分模块。