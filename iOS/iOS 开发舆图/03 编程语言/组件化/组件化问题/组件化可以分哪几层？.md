- 四层架构基本上可以算得上是万能架构了，业务层-》中间层-》基础层-》第三方私有化。
这四层自上而下，同层之间不可以相互引用。

---

组件之间怎么解耦？

- 组件解耦并不是说要求每个组件间都没有耦合，组件间也需要有上下层依赖的关系。
组件间的上下层关系划分清楚了，就会容易维护和管理。
- 上层对下层依赖，下层对上层不能有依赖，同层级的也不能有依赖
注意：应该根据项目和业务设计自己的层级架构
- 在 LPDBUserCenterModule 的抽离过程中就遇到了这个问题，LPDBUserCenterModule
和 LPDBLoginModule 共同依赖了几个和用户信息有关的数据模型，导致需要发生模块间横向依赖，所以我们将共用的数据模型抽出，然后下沉到了

---

第一层：业务层

- 就是首页、视频页、详情页、登录页等，项目具体实现
- 最上层是迭代业务组件，更新频率最高。【mx：就是经常会变的业务】

---

第二层：中间层

- 中间层是上服务于业务层，下使用基础层，这部分已经和项目的具体业务有关系了，
这里最多的是基础UI组件的封装和业务公共功能部分的封装
- 中间层一般是通用的业务组件，比如账号、埋点、支付、购物车等；【mx：就是app必备的业务】
- 这一类是产品基础库，在某个产品中强相关依赖使用。
- 产品基础库包括：通用的WebViewContainer组件（封装了JSBridge）、自定义数字键盘、
表情键盘、自定义下拉列表、循环滚动页面、
AFNeworking封装库（对上层业务隐藏AF的直接引用）、以及其他自定义的UI基础组件库。
- 如果需要定制，最好单独抽出来做个控件

---

第三层：基础层

- 如果是通用的功能，放到最底层的控件库
- 【底层的一类toolkit】第三类模块和具体的业务场景无关，比如Database模块，
提供数据的读写服务，包含多线程的处理。比如Network模块，提供和Server数据交互的方式，
包含并发数控制，网络优化等处理。比如图片处理类，提供异步绘制圆角头像。这些模块可以被任意模块使用，
但不和任何业务相关。这种组件属于我们app的基础服务提供者，更像是一个个SDK，或是toolkit。
我不知道蘑菇街是怎么处理这类组件接入的，很明显URL的接入方式并不适合。
我们通过Pods使用的很多著名第三方库都属于这一类，像FMDB，SDWebImage等。
- 这一类是公共基础库，用于跨产品使用
- 公共库包括：组件化中间件、网络诊断、第三方SDK管理封装、长连接相关、Patch相关、
网络和页面监控相关、用户行为统计库、
第三方分享库、JSBridge相关、关于Device＋file＋crypt＋http的基础方法等。
- 底层可以是与业务无关的基础组件，比如网络和存储等；

---

第四层：第三方私有化

- 私有化第三方上层是基础层，在项目中不直接使用第三方代码，
而是通过基础层加一层封装，比如说我们用的网络AFN，如果有一天AFN废弃了也不维护了，
我们不用到各个模块去全部修改一遍，只需要到基础层的网络模块进行修改，而对外接口是不变的，
修改的是接口的具体实现部分，
外部可以0修改，完全无感知。另外，基础层包含许多基础工具，