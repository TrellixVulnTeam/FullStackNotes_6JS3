iOS的消息是分两部分的：一部分是走APNs的通知栏消息，另一部分是走个推通道的透传消息。这两部分是服务端推送代码里面应用设定好的，分别是两个不同的方法。如果消息下发的时候，当应用是在后台的（也就是应用是离线）那么会收到APNs的通知，透传消息就进离线了；只有当APP下次在线的时候（也就是下次应用到前台的时候）才会通过个推通道下发，如果当下发的时候应用是在前台的，客户端就直接收到透传消息。

![Fueq9R](https://gitee.com/threecornerstones/ThreeCornerstones_Pic/raw/master/uPic/Fueq9R.png)

个推的 iOS 推送包括 2 个部分，APNs推送与应用内消息。

绿色部分是 APNs 推送，个推平台替开发者的应用通过苹果 APNs 服务器向指定的目标设备进行推送。由 APNs Server 将通知推送到相应的 iOS 设备上。

红色部分是个推应用内推送部分，即 App 启动时，应用内集成的个推SDK会开启长连接到个推服务器，从而开发者可通过个推服务器推送消息到 App 里，这条链路性能和稳定性更强，是APNs的一个很重要的补充。