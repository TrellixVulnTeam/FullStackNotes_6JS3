- 只有特定使用场景，应用才可能在后台持续运行，比如导航、音乐播放，VoIP 等。
- 目前苹果支持9种后台模式，具体类型可使用 Xcode 的 Capabilities 来查看，如下图所示

## 静默推送

静默推送可以在用户无感知的情况下，将数据推送到设备上。只需要将 push payload 里的 content-available 的值设置为 1，同时 payload 中不要包含 alert、sound、badge 字段，示例如下：

示例摘抄自 Creating the Remote Notification Payload Listing 7-1

```
{
"aps" : {
    "content-available" : 1
  },
  "acme1" : "bar",
  "acme2" : 42
}
```

当收到静默推送后，系统出于对电池寿命和性能的保证，会智能地在后台唤起应用去下载相关内容。

下图还是以消息免打扰为例，用户在前台对某个会话开启了消息免打扰，然后回到后台，
一段时间后该会话有新的内容，但是用户开了勿扰模式，所以我们需要“偷偷地”更新会话内容，
但是用户却无感知。这里“偷偷地”就是系统在收到静默推送时，
会在合适的时机在后台唤起应用去加载该会话的新内容（该后台任务可以持续30秒）。
等用户回到前台，会发现免打扰的会话里的内容也有了更新，极大提高了用户体验。

关于静默推送的其它几点 tips：

必须将 apns-priority 设置为 5，否则系统不会唤起应用。
watchOS 应用必须（其它平台则强烈推荐）将 apns-push-type 设置为 background。