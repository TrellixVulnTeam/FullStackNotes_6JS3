### **并行、并发**

- 并行是多cpu处理多线程
- 并发是单cpu处理多线程
- 都是同一时间，两个或多个事件同时发生
- 并发是伪同时
- 并行是真同时
- 并发 Concurrency和并行 Parallelism
- 并发是程序的属性(property of the program)；并发是伪同时
- 并行是计算机的属性(property of the machine)；并行是真同时
- 并行和并发都是用来让不同的任务可以"同时执行"

### **线程、进程**

- 进程是指在系统中正在运行的一个应用程序；每个进程之间是相互独立的；
- 一个进程要想执行任务，必须得有线程（每个进程至少要有一条线程）
- 一个进程的所有任务都在线程中执行
- 线程的内部是串行的

### **队列**

- dispatch_queue_serial
- 串行队列dispatch_queue_serial（1个子线程）可用NULL表示
- dispatch_get_global_queue
- 全局队列dispatch_get_global_queue(多个线程)
- 全局队列是系统自带的一条并行队列
- dispatch_queue_concurrent
- 并行队列dispatch_queue_concurrent(多个线程)
- dispatch_get_main_queue
- 主队列dispatch_get_main_queue(主线程)
- 除了主队列是在主线程中运行，其他的队列都会有子线程，都不是主线程，要操作UI，就要回到这个主线程队列中，就是把操作UI的任务放到主队列执行。
- dispatch_sync
- 同步dispatch_sync(主线程)
- dispatch_async
- 异步dispatch_async(多个线程)

### **组合**

- 串行队列同步：操作不会新建线程（操作顺序执行）
- 串行队列异步：操作需要一个子线程，会新建线程，线程的创建和回收不需要程序员参与，操作顺序执行，是最安全的选择。
- 并行队列同步：操作不会新建线程（操作顺序执行）
- 并行队列异步：操作会新建多个线程（有多少任务，就开n条线程执行，不过会复用线程，当前面线程的任务执行完后，那个线程可以拿来复用）（操作无序执行，对列前如果有其他任务，会等待前面的任务完成之后再执行；场景：既不影响主线程，又不需要顺序执行的操作）
- 全局队列同步：操作不会新建线程（操作顺序执行）
- 全局队列异步：操作会新建多个线程，操作无序执行，队列前如果有其他任务，会等待前面的任务完成之后再执行。
- 主队列同步：如果把主线程中的操作看成一个大的block，那么除非主线程被用户杀掉，否则永远不会结束；主队列中添加的同步操作永远不会被执行，会死锁。
- 主队列异步：操作都应该在主线程上顺序执行的，不存在异步的。

### **线程和进程的关系？**

- 进程是指在系统中正在运行的一个应用程序；每个进程之间是相互独立的
- 一个进程想要执行任务，必须得有线程（每个进程至少要有一条线程）
- 一个进程的所有任务都在线程中执行
- 线程的内部是串行的

### **最大并发数**

- gcd和nsoperation大约都是63条
- nsthread本身并不限制，超过阈值会报错

### **队列和线程的关系？**

- 队列和线程可以说是两个层级的概念，队列是为了方便使用和理解的抽象结构，而线程是系统级的进行运算调度的单位，他们是上下层级之间的关系。
- 一个队列有一个或多个任务组成，当这些任务要开始执行时，系统会分别把他们分配到某个线程上去执行。当有多个系统核心时，为了高效运行，这些核心会将多个线程分配到各核心上去执行任务，对于系统核心来说并没有任务的概念。
- 每一时刻，一个线程都只能执行一个任务。一个线程也可能是闲置或者挂起的，因此线程存在时不一定就在执行任务。

### 

[并发和并行](https://www.notion.so/62296770e6024af08a0c5bc42ab770ac)

[多线程介绍](https://www.notion.so/2a0decdaf84d410eaf3774473526dcc4)